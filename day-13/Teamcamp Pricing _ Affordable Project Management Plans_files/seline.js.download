(()=>{function O(r){let d="seline_vid",g="seline-do-not-track",w=r.apiHost??"https://api.seline.com",S=`${w}${r.apiHost?"/ennui/blase":"/s/e"}`,v=`${w}${r.apiHost?"/ennui/su":"/s/su"}`,k=r.token,f=r.maskPatterns??[],b=r.skipPatterns??[],y=r.cookieOnIdentify??!1,u=r.cookie??!1,c=r.outbound??!1,a=_(d),p={},P=null,m=sessionStorage.getItem("seline:referrer")?"":document.referrer;function _(t){let e=document.cookie.match(new RegExp(`(^|;\\s*)${t}=([^;]*)`));return e?decodeURIComponent(e[2]):null}function E(t,e,i=365){let n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);let o=location.hostname.split(".").slice(-2).join(".");document.cookie=`${t}=${encodeURIComponent(e)};expires=${n.toUTCString()};path=/;domain=.${o};SameSite=Lax`}function $(){return localStorage.getItem(g)==="1"}function N(){localStorage.setItem(g,"1")}function R(){let t=history.pushState;history.pushState=function(...i){t.apply(this,i),h()},addEventListener("popstate",()=>h());function e(){!P&&document.visibilityState==="visible"&&h()}document.visibilityState!=="visible"?document.addEventListener("visibilitychange",e):h(),U()}function x(t=!1){r.autoPageView&&!t||(r.autoPageView=!0,R())}function A(t){let e=b.map(n=>new RegExp(`^${n.replace(/\*/g,"[^/]+")}$`)),i=f.map(n=>new RegExp(`^${n.replace(/\*/g,"[^/]+")}$`));if(e.some(n=>n.test(t)))return null;for(let n=0;n<f.length;n++)if(i[n].test(t))return f[n];return t}function T(t,e,i=!0){if($()||(window.Cypress||window.__phantom||window.__nightmare||window.navigator.webdriver)&&!window.__seline)return Promise.resolve();let n={...e};return p.userId&&(n.visitorId=p.userId),a&&(n.visitorId=a),i&&!(!a&&u)&&navigator?.sendBeacon?(navigator.sendBeacon(t,JSON.stringify(n)),Promise.resolve()):fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),keepalive:!0}).then(async l=>{if(u&&!a&&l.ok){let s=await l.json();s?.visitorId&&(a=s.visitorId,E(d,a))}})}function C(t){T(S,{token:k,...t},!0)}function I(t,e){let i=A(window.location.pathname);i&&C({pathname:i+window.location.search,name:t,data:e})}function h(t){let e=t??window.location.pathname;if(P===e)return;P=e;let i=A(e);i&&((!m||m.includes(window.location.hostname))&&(m=null),C({pathname:t?i:i+window.location.search,referrer:m}),m&&(m=null,sessionStorage.setItem("seline:referrer","set")))}function L(t){p={...p,...t},T(v,{token:k,fields:p},!1).then(async e=>{if(e){let i=await e.json();i?.visitorId&&(a=i.visitorId,(y||u)&&E(d,a))}})}function U(){document.addEventListener("click",t=>{let e=t.target;if(!e||(e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA")&&e.type!=="submit")return;if(c){let o=e;for(;o&&o.tagName!=="A";)o=o.parentElement;if(o&&o.tagName==="A"){let l=o,s=l.href;s&&l.hostname&&l.hostname!==window.location.hostname&&I("outbound link: clicked",{url:s,text:l.textContent?.trim()||"",hostname:l.hostname})}}for(;e&&!e?.hasAttribute("data-sln-event");)e=e.parentElement;if(!e)return;let i=e.getAttribute("data-sln-event");if(!i)return;let n={};for(let o of Array.from(e.attributes))o.name.startsWith("data-sln-event-")&&o.value&&(n[o.name.slice(15)]=o.value);if(e.tagName==="FORM"){let l=Array.from(e.elements);for(let s of l)s.type!=="password"&&s.name&&s.value&&(n[s.name]=s.value)}I(i,n)})}function H(){u=!0,a&&E(d,a)}return{track:I,page:h,setUser:L,enableAutoPageView:x,doNotTrack:N,enableCookieMode:H}}if(!window.seline||"queue"in window.seline){let g=function(c){return c?c.replace(/^\[|\]$/g,"").split(",").map(a=>a.trim().replace(/^['"]|['"]$/g,"")).filter(Boolean):[]},r=window.seline?.queue??[],d=document.currentScript?.getAttribute("data-token"),w=g(document.currentScript?.getAttribute("data-skip-patterns")),S=g(document.currentScript?.getAttribute("data-mask-patterns")),v=document.currentScript?.getAttribute("data-auto-page-view")!=="false",k=document.currentScript?.getAttribute("data-api-host"),f=document.currentScript?.getAttribute("data-cookie-on-identify")==="true",b=document.currentScript?.getAttribute("data-cookie")==="true",y=document.currentScript?.getAttribute("data-outbound")==="true",u=O({token:d,skipPatterns:w,maskPatterns:S,autoPageView:v,apiHost:k,cookieOnIdentify:f,cookie:b,outbound:y});for(;r.length>0;){let c=r.shift();c&&u[c.method](...c.args)}window.seline=u,v&&u.enableAutoPageView(!0)}})();
